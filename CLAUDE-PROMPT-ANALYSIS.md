# 🤖 Claude API デザイン評価プロンプト詳細

## 📝 **メインプロンプト構造**

### **基本プロンプト（generateAnalysisPrompt関数）**

```text
あなたはUI/UXデザインの専門家です。以下のFigma URLのデザインを分析し、JSON形式で回答してください。

Figma URL: [対象URL]

以下の形式で分析結果を出力してください：

```json
{
  "genre": "チャットUI|予約画面|ダッシュボード|フォーム|ナビゲーション|カード|モーダル|リスト|その他",
  "ui_component_type": "具体的なUIコンポーネント種別",
  "scores": {
    "aesthetic": 0.85,
    "consistency": 0.92,
    "hierarchy": 0.78,
    "usability": 0.88,
    "responsive": 0.75,
    "accessibility": 0.65
  },
  "summary": "デザインの簡潔なサマリー（1-2文）",
  "detailed_analysis": "詳細な分析結果",
  "confidence_score": 0.85
}
```

評価基準：
- aesthetic: 視覚的魅力、色彩、レイアウトの美しさ
- consistency: デザインシステムの一貫性、統一感
- hierarchy: 情報階層の明確さ、視線誘導
- usability: 使いやすさ、直感性、操作性
- responsive: レスポンシブ対応、画面サイズ適応
- accessibility: アクセシビリティ、ユーザビリティ配慮

各スコアは0.0-1.0の範囲で評価してください。
confidence_scoreはあなたの分析の確信度です。
```

## 🎯 **分析モード別の追加指示**

### **1. Quick Mode（クイック分析）**
```text
簡潔な分析を行い、主要な要素のみを評価してください。
処理時間を優先し、基本的な項目に焦点を当てます。
```

### **2. Comprehensive Mode（包括的分析）** ← デフォルト
```text
包括的な分析を行い、すべての評価項目を詳細に検討してください。
デザインシステム、ユーザー体験、技術的実装の観点から評価します。
```

### **3. Detailed Mode（詳細分析）**
```text
非常に詳細な分析を行い、以下の追加項目も含めてください：
- カラーパレット分析
- タイポグラフィ評価
- インタラクション設計
- 情報アーキテクチャ
- ブランド整合性
```

## 📊 **評価スコアの詳細解説**

### **1. Aesthetic（美観）- 0.0-1.0**
- **視覚的魅力**: 第一印象の良さ
- **色彩設計**: カラーパレットの調和
- **レイアウト**: 要素配置のバランス
- **空白の使い方**: 余白の効果的活用
- **グラフィック要素**: アイコン、画像の品質

### **2. Consistency（一貫性）- 0.0-1.0**
- **デザインシステム**: 統一されたコンポーネント
- **スタイルガイド遵守**: フォント、色、間隔の統一
- **パターンの再利用**: UIパターンの一貫性
- **ブランドアイデンティティ**: ブランド要素の統一感

### **3. Hierarchy（階層）- 0.0-1.0**
- **情報の優先順位**: 重要度に応じた視覚的強調
- **視線誘導**: 自然な視線の流れ
- **グループ化**: 関連要素の適切なグループ化
- **ナビゲーション構造**: 明確な階層構造

### **4. Usability（使いやすさ）- 0.0-1.0**
- **直感性**: 学習不要な操作性
- **フィードバック**: ユーザーアクションへの応答
- **エラー処理**: エラー時の明確なガイダンス
- **タスク完了効率**: 目的達成までの効率性

### **5. Responsive（レスポンシブ）- 0.0-1.0**
- **画面サイズ対応**: モバイル/タブレット/デスクトップ
- **ブレークポイント設計**: 適切な切り替えポイント
- **コンテンツの柔軟性**: サイズ変更時の可読性維持
- **タッチターゲット**: モバイルでの操作性

### **6. Accessibility（アクセシビリティ）- 0.0-1.0**
- **色覚対応**: カラーコントラスト比
- **キーボード操作**: キーボードナビゲーション対応
- **スクリーンリーダー**: 代替テキストの提供
- **WCAG準拠**: ガイドライン準拠レベル

## 🎨 **ジャンル分類**

### **定義済みジャンル**
1. **チャットUI**: メッセージング、会話インターフェース
2. **予約画面**: ブッキング、スケジューリング系
3. **ダッシュボード**: データ可視化、管理画面
4. **フォーム**: 入力フォーム、登録画面
5. **ナビゲーション**: メニュー、ナビゲーションバー
6. **カード**: カード型レイアウト
7. **モーダル**: ポップアップ、ダイアログ
8. **リスト**: 一覧表示、テーブル
9. **その他**: 上記に分類されないUI

## 🔧 **Claude API設定**

### **モデル設定**
```javascript
{
  model: 'claude-3-5-sonnet-20241022',  // 最新のClaude 3.5 Sonnet
  max_tokens: 4096,                      // 十分な出力長
  temperature: 0.3,                      // 低温度で一貫性確保
  top_p: 0.9                            // 多様性と正確性のバランス
}
```

### **温度設定の理由**
- **0.3という低温度**: デザイン評価の一貫性を重視
- **数値スコアの安定性**: 同じデザインで大きくブレないように
- **専門的分析**: 創造性より正確性を優先

## 📋 **カスタムプロンプト機能**

ユーザーは追加の評価観点を指定可能：

```javascript
// 例：特定の業界向け評価
custom_prompt: `
医療系アプリケーションとしての観点から、以下も評価してください：
- 患者の安心感を与えるデザインか
- 緊急時の操作性
- 高齢者への配慮
`
```

## 🛡️ **エラーハンドリング**

### **フォールバック解析**
JSON解析が失敗した場合、テキストから以下を抽出：

1. **キーワード検索によるジャンル抽出**
2. **数値パターンマッチングによるスコア抽出**
3. **デフォルト値の適用**（confidence: 0.6）

### **スコア正規化**
- 10点満点表記 → 0.0-1.0に変換
- 範囲外の値 → 0.0-1.0にクリップ
- 数値以外 → 0.5（中間値）を適用

## 💡 **プロンプト改善のポイント**

### **現在の強み**
1. **構造化された出力**: JSON形式で解析しやすい
2. **明確な評価基準**: 各スコアの定義が明確
3. **柔軟性**: 3つのモードとカスタムプロンプト対応

### **潜在的な改善点**
1. **具体例の追加**: 各スコアレベルの具体例
2. **業界別テンプレート**: EC、医療、教育など
3. **比較分析**: 他のデザインとの相対評価
4. **トレンド考慮**: 最新のデザイントレンド反映

## 🎯 **使用例**

### **基本的な使用**
```javascript
// POST /api/claude/analyze-design
{
  "figma_url": "https://www.figma.com/design/abc123...",
  "analysis_mode": "comprehensive"
}
```

### **カスタム評価**
```javascript
{
  "figma_url": "https://www.figma.com/design/abc123...",
  "analysis_mode": "detailed",
  "custom_prompt": "ダークモードでの見やすさも評価してください"
}
```

## 📊 **期待される出力例**

```json
{
  "genre": "ダッシュボード",
  "ui_component_type": "分析ダッシュボード",
  "scores": {
    "aesthetic": 0.85,
    "consistency": 0.92,
    "hierarchy": 0.78,
    "usability": 0.88,
    "responsive": 0.75,
    "accessibility": 0.65
  },
  "summary": "データ可視化を中心とした分析ダッシュボード。全体的に洗練されたデザインで、情報階層が明確に設計されています。",
  "detailed_analysis": "このダッシュボードは、複雑なデータを直感的に理解できるよう工夫されています。カラーパレットは青を基調とし、重要な指標には適切なアクセントカラーが使用されています。グリッドシステムが効果的に活用され、各ウィジェットの配置にも一貫性があります。",
  "confidence_score": 0.88
}